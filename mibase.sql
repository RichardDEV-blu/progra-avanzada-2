create table authors (version integer, id bigint generated by default as identity, name varchar(255), primary key (id));
create table book_authors (author_id bigint not null, book_isbn varchar(255) not null);
create table books (price numeric(38,2), version integer, isbn varchar(255) not null, title varchar(255), primary key (isbn));
create table customers (version integer, id bigint generated by default as identity, email varchar(255), name varchar(255), primary key (id));
create table Inventory (sold integer, supplied integer, version integer, book_isbn varchar(255) not null, primary key (book_isbn));
create table line_items (quantity integer, idx bigint not null, order_id bigint not null, book_isbn varchar(255), primary key (idx, order_id));
create table purchase_orders (status smallint check ((status between 0 and 3)), total integer, customer_id bigint, delivered_on timestamp(6), id bigint generated by default as identity, placed_on timestamp(6), primary key (id));
alter table if exists book_authors add constraint FKo86065vktj3hy1m7syr9cn7va foreign key (author_id) references authors;
alter table if exists book_authors add constraint FKpofpc53c0btnnx7j777thakhe foreign key (book_isbn) references books;
alter table if exists Inventory add constraint FKdmhkf2qcda7uw8lu688jugu2s foreign key (book_isbn) references books;
alter table if exists line_items add constraint FKqxuqc9unf2dsoohy6tef6675b foreign key (order_id) references purchase_orders;
alter table if exists line_items add constraint FK5faywgsy47v4g95fhhgkvdgxv foreign key (book_isbn) references books;
alter table if exists purchase_orders add constraint FKfbqmektiojpqhypnpog4uqk41 foreign key (customer_id) references customers;
create table authors (version integer, id bigint not null, name varchar(255), primary key (id));
create table book_authors (author_id bigint not null, book_isbn varchar(255) not null);
create table books (price numeric(38,2), version integer, isbn varchar(255) not null, title varchar(255), primary key (isbn));
create table customers (version integer, id bigint generated by default as identity, email varchar(255), name varchar(255), primary key (id));
create table hibernate_sequences (next_val bigint, sequence_name varchar(255) not null, primary key (sequence_name));
insert into hibernate_sequences(sequence_name, next_val) values ('default',0);
insert into hibernate_sequences(sequence_name, next_val) values ('default',0);
create table Inventory (sold integer, supplied integer, version integer, book_isbn varchar(255) not null, primary key (book_isbn));
create table line_items (quantity integer, idx bigint not null, order_id bigint not null, book_isbn varchar(255), primary key (idx, order_id));
create table purchase_orders (status smallint check ((status between 0 and 3)), total integer, customer_id bigint, delivered_on timestamp(6), id bigint generated by default as identity, placed_on timestamp(6), primary key (id));
alter table if exists book_authors add constraint FKo86065vktj3hy1m7syr9cn7va foreign key (author_id) references authors;
alter table if exists book_authors add constraint FKpofpc53c0btnnx7j777thakhe foreign key (book_isbn) references books;
alter table if exists Inventory add constraint FKdmhkf2qcda7uw8lu688jugu2s foreign key (book_isbn) references books;
alter table if exists line_items add constraint FKqxuqc9unf2dsoohy6tef6675b foreign key (order_id) references purchase_orders;
alter table if exists line_items add constraint FK5faywgsy47v4g95fhhgkvdgxv foreign key (book_isbn) references books;
alter table if exists purchase_orders add constraint FKfbqmektiojpqhypnpog4uqk41 foreign key (customer_id) references customers;
